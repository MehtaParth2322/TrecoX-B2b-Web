<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My TrecoX</title>
    
    <link rel="stylesheet" href="./css/fontawesome/css/all.css">
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    
    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-storage.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-storage.js"></script> 
    
    <!-- apex chart -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    
    <!-- custom css -->
    <link rel="stylesheet" href="css/home.css">
</head>
<body>

    <div class="container-new">
        <main>
            <!-- Dashboard Div  -->
            <div class="main__container" id="dashboardDiv">
                <div class="main__title">
                    <img src="./images/hello.svg" alt="welcome">
                    <div class="main__greeting">
                        <h1><span id="user">User</span></h1>
                        <p>Welcome to trecoX Dashboard</p>
                    </div>
                </div>
                <div class="main__cards">
                    <div class="card">
                        <i class="fa fa-user fa-2x text-lightblue"></i>
                        <div class="card__inner">
                            <p class="text-primary-p">Number of Products</p>
                            <span class="font-bold text-title" id="numOfProducts">0</span>
                        </div>
                    </div>
                    <div class="card">
                        <i class="fa fa-thumbs-up fa-2x text-green"></i>
                        <div class="card__inner">
                            <p class="text-primary-p">Number of Connections</p>
                            <span class="font-bold text-title" id="notification_connection">0</span>
                        </div>
                    </div>
                    <div class="card">
                        <i class="fa fa-calendar fa-2x text-red"></i>
                        <div class="card__inner">
                            <p class="text-primary-p">Number of Orders</p>
                            <span class="font-bold text-title" id="order_notification">0</span>
                        </div>
                    </div>
                </div>
                <!-- <div class="charts">
                    <div class="charts__left">
                        <div class="charts__left__title">
                            <div>
                                <h1>Daily Reports</h1>
                                <p>SVIT, Vasad</p>
                            </div>
                            <i class="fa fa-usd"></i>
                        </div>
                        <div id="apex1"></div>
                    </div>
                    <div class="charts__right">
                        <div class="charts__right__title">
                            <div>
                                <h1>Stats Reports</h1>
                                <p>SVIT, Vasad</p>
                            </div>
                            <i class="fa fa-usd"></i>
                        </div>
                        <div class="charts__right__card">
                            
                            <div class="card1">
                                <h1>Income</h1>
                                <p>$73,000</p>
                            </div>
                            <div class="card2">
                                <h1>Sales</h1>
                                <p>$123,000</p>
                            </div>
                            <div class="card3">
                                <h1>Users</h1>
                                <p>1256</p>
                            </div>
                            <div class="card4">
                                <h1>Orders</h1>
                                <p>347</p>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="container bg-success px-5 py-3">
                    <!-- <h3 class="text-center mt-5 mb-5 font-weight-bold title text-dark" style="font-size: 1.6rem;">WHY CHOOSE US ?</h3> -->
                    <div class="row">
                      <div class="col-md-6 about-us text-light" style="font-size: 1rem;">
                        <p class="about-title text-light"><b>New in our services ?</b></p>
                        <ul>
                          <li>Understand our client goals first</li>
                          <li>New business stratergies</li>
                          <li>Believe in doing business with honesty</li>
                          <li>Client's satisfaction is our motto</li>
                          <li>Easy inventory management</li>
                          <li>Fast &amp; Secure web server</li>
                          <li>24/7 Customer Services</li>
                        </ul>
                      </div>
                      <div class="col-md-6" style="text-align: right;">
                        <img src="./images/about.png" class="img-fluid" width="320px">
                      </div>
                    </div>
                  </div>
            </div>
            <!-- product mnagement -->
            <div class="main__container" id="pro-man" style="display: none;">
                <h2 id="product-status" class="text-danger"></h2>
                <h4 class="text-primary">Add Category</h4>
                <small class="text-secondary">To add new category you have to add atleast one product for the same category</small>
                
                <div class="outer" style="display: flex;">
                    <div class="input">
                        <div class="form-inline mt-1">
                            <input type="text" class="form-control" id="catName" placeholder="Add Category" autocomplete="off" style="display: inline-block; width: 200px;"> 
                            <h5 for="Category" class="text-center text-dark mx-3" style="display: inline-block;">Or</h5>
                            <select name="category" class="form-control mt-3" id="subCategory" style="display: inline-block; width: 200px;">
                                <option selected>Select</option>
                            </select>
                        </div>
                        <div class="form-group mt-1">
                            <label for="Name" class="text-dark">Product Name:</label> 
                            <input type="text" class="form-control" id="proName" placeholder="Product Name" autocomplete="off" style="width: 500px;"> 
                        </div>
                            <div class="form-group">
                                <label for="Name" class="text-dark">Price:</label> 
                                <input type="number" class="form-control" id="price" placeholder="Price" style="width: 500px;"> 
                            </div>
                            <div class="form-group">
                                <label for="Name" class="text-dark">Mrp:</label> 
                                <input type="number" class="form-control" id="mrp" placeholder="MRP" style="width: 500px;"> 
                            </div>
                        <div class="form-group mt-1">
                            <label for="Name" class="text-dark">Select Image:</label> 
                            <input type="file" class="form-control" id="image" autocomplete="off" style="width: 500px;"> 
                        </div>
                    </div>
                    <div class="img" style="display: block;">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRza72o_kVyvLgPaULsX2PaKTkoIlotyw52HQ&usqp=CAU" class="img-fluid mx-5 my-3" style="width: 250px; height: 250px; border: 2px solid black; float: right;" id="myimg" alt="">
                        <div class="progress" style="width: 100%; margin-left: 10px;">
                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" id="upProgress"></div>
                        </div>
                    </div>
                </div>
                    <div class="form-group">
                        <label for="Name" class="text-dark">Description</label> 
                        <textarea name="description" class="form-control" id="description" cols="30" rows="5"></textarea>
                    </div>
                    <button class="btn btn-primary mt-3" id="addCategory">Add</button>
            </div>
            <!-- Customer mnagement -->
            <div class="main__container" id="cus-man" style="display: none;">
                <h1 class="text-primary">Wholesalers</h1>               
                <a id="cuspg" style="text-decoration: none;" class="text-dark"></a>
            </div>
            <!-- Products -->
            <div class="main__container" id="products" style="display: none;">
                <h1 class="text-primary">Products</h1>               
                <p class="text-primary">Sort by:</p> 
                <select name="category" class="form-control mt-3" id="subCategorySort">
                    <option selected>Select</option>
                </select>
                <a id="productpg" style="text-decoration: none;" class="text-dark"></a>
            </div>
            <!-- Orders -->
            <div class="main__container" id="orders" style="display: none;">
                <h1 class="text-primary">Orders</h1>               
                <a id="orderpg" style="text-decoration: none;" class="text-dark"></a>
            </div>
            
        </main>

        <!-- slidebar -->

        <div id="sidebar">
            <div class="sidebar__title">
                    <div class="sidebar__img">
                        <a href="./profile.html">
                            <img src="./images/logo (2).png" id="logo" alt="logo">
                        </a>
                        <a href="./profile.html">
                            <h1 class="heading" id="cmp_name">Company_name</h1>
                        </a>
                    </div>
                <i class="fa fa-times" id="sidebarIcon" onclick="closeSidebar()"></i>
            </div>
            <div class="sidebar__menu">
                <div class="sidebar_link active_menu_link" id="side-dashboard">
                    <i class="fa fa-home"></i>
                    <a href="#dashboardDiv">Dashboard</a>
                </div>
                <h2>MNG</h2>
                <div class="sidebar_link" id="side-cus-man">
                    <i class="fa fa-user-secret"></i>
                    <a href="#cus-man">Customer Management</a>
                    <span id="notification" style="border-radius: 50%; width: 20px; height: 20px; background-color: red; position: absolute; left: 250px; padding-left: 5px;">0</span>
                </div>
                <div class="sidebar_link" id="side-order">
                    <i class="fa fa-building"></i>
                    <a href="#orders">Orders</a>
                </div>
                <div class="sidebar_link" id="side-pro-man">
                    <i class="fa fa-wrench"></i>
                    <a href="#pro-man">Product Management</a>
                </div>
                <div class="sidebar_link" id="side-products">
                    <i class="fa fa-archive"></i>
                    <a href="#products">Products</a>
                </div>
                <div class="sidebar_logout">
                    <i class="fa fa-power-off"></i>
                    <a href="" onclick="signout()">Log Out</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- First time profile page -->
    <div class="bg-modal">
        <div class="modal-content">
            <div class="close">+</div>
            <h2 class="modal-header">Create your profile first!!</h2>
            <img src="./images/logo (2).png" id="logo_main" alt="logo">
            <input type="file" class="form-control" id="logo_select" autocomplete="off" placeholder="Select Logo" required>
            <form class="profile-form">
                <label for="exampleInputPassword1">Category:  </label>
                <select class="custom-select my-3 mr-sm-2" id="category" required>
                    <option selected value="0">Choose...</option>
                    <option value="Watch">Watch</option>
                    <option value="Stationery">Stationery</option>
                    <option value="General Store">General Store</option>
                  </select>
                <div class="form-group">
                  <label for="exampleInputPassword1">Contact No.</label>
                  <input type="number" class="form-control my-3" id="contact" placeholder="Contact Number" required autocomplete="off" autofocus>
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Location</label>
                    <input type="text" class="form-control my-3" id="location" placeholder="Location" required autocomplete="off" autofocus>
                </div>
                <button type="submit" class="btn btn-primary my-3" id="profileFormSubmit">Submit</button> <p id="uploading"></p>
            </form>
        </div>
    </div>


    <!-- scripts -->
    <script>
        var ImgName, ImgUrl;
        var files = [];
        var filesLogo = [];
        var reader,readerLogo;
        var flag = 0;
        document.getElementById('image').onchange = e => {
            files = e.target.files;
            reader =new FileReader();
            reader.onload = function(){
                document.getElementById('myimg').src = reader.result;
            }
            reader.readAsDataURL(files[0]);
        }
        document.getElementById('logo_select').onchange = e => {
            flag = 1;
            filesLogo = e.target.files;
            readerLogo =new FileReader();
            readerLogo.onload = function(){
                document.getElementById('logo_main').src = readerLogo.result;
                document.getElementById('logo').src = readerLogo.result;
            }
            readerLogo.readAsDataURL(filesLogo[0]);
            var user = localStorage.getItem('user');
            var uploadTaskX = firebase.storage().ref('Logo/'+ user).put(filesLogo[0]);
            uploadTaskX.on('state_changed',function(snapshot) {
              var progressX = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
              document.getElementById('uploading').innerHTML=  progressX + "%";
              console.log(progressX);
              document.getElementById('profileFormSubmit').disabled = true
            },
            function(err) {
              alert(err);
            },
            function(){
                uploadTaskX.snapshot.ref.getDownloadURL().then(function(url){
                console.log(url);
                localStorage.setItem('url',url);
                });
                document.getElementById('profileFormSubmit').disabled = false
            });
        }

    </script>

    <script src="./jsnew/jquery.js"></script>
    <script>
        console.log(document.getElementById('logo_main').src);
        if(flag == 1){
            $('#profileFormSubmit').prop('disabled',false);
        }
    </script>
    <script src="./jsnew/index.js"></script>
    <script src="./jsnew/home.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>
</html>